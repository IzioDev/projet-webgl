{"version":3,"sources":["utils/webgl-debug.ts"],"names":[],"mappings":"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","file":"webgl-debug.17cddd33.js","sourceRoot":"..\\src","sourcesContent":["/*\r\n** Copyright (c) 2012 The Khronos Group Inc.\r\n**\r\n** Permission is hereby granted, free of charge, to any person obtaining a\r\n** copy of this software and/or associated documentation files (the\r\n** \"Materials\"), to deal in the Materials without restriction, including\r\n** without limitation the rights to use, copy, modify, merge, publish,\r\n** distribute, sublicense, and/or sell copies of the Materials, and to\r\n** permit persons to whom the Materials are furnished to do so, subject to\r\n** the following conditions:\r\n**\r\n** The above copyright notice and this permission notice shall be included\r\n** in all copies or substantial portions of the Materials.\r\n**\r\n** THE MATERIALS ARE PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n** EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n** MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n** IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n** CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n** TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n** MATERIALS OR THE USE OR OTHER DEALINGS IN THE MATERIALS.\r\n*/\r\n\r\n// Various functions for helping debug WebGL apps.\r\n\r\nexport const WebGLDebugUtils = () => {\r\n\r\n    /**\r\n     * Wrapped logging function.\r\n     * @param {string} msg Message to log.\r\n     */\r\n    var log = function(msg) {\r\n        if (window.console && window.console.log) {\r\n            window.console.log(msg);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Wrapped error logging function.\r\n     * @param {string} msg Message to log.\r\n     */\r\n    var error = function(msg) {\r\n        if (window.console && window.console.error) {\r\n            window.console.error(msg);\r\n        } else {\r\n            log(msg);\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Which arguments are enums based on the number of arguments to the function.\r\n     * So\r\n     *    'texImage2D': {\r\n     *       9: { 0:true, 2:true, 6:true, 7:true },\r\n     *       6: { 0:true, 2:true, 3:true, 4:true },\r\n     *    },\r\n     *\r\n     * means if there are 9 arguments then 6 and 7 are enums, if there are 6\r\n     * arguments 3 and 4 are enums\r\n     *\r\n     * @type {!Object.<number, !Object.<number, string>}\r\n     */\r\n    var glValidEnumContexts = {\r\n        // Generic setters and getters\r\n\r\n        'enable': {1: { 0:true }},\r\n        'disable': {1: { 0:true }},\r\n        'getParameter': {1: { 0:true }},\r\n\r\n        // Rendering\r\n\r\n        'drawArrays': {3:{ 0:true }},\r\n        'drawElements': {4:{ 0:true, 2:true }},\r\n\r\n        // Shaders\r\n\r\n        'createShader': {1: { 0:true }},\r\n        'getShaderParameter': {2: { 1:true }},\r\n        'getProgramParameter': {2: { 1:true }},\r\n        'getShaderPrecisionFormat': {2: { 0: true, 1:true }},\r\n\r\n        // Vertex attributes\r\n\r\n        'getVertexAttrib': {2: { 1:true }},\r\n        'vertexAttribPointer': {6: { 2:true }},\r\n\r\n        // Textures\r\n\r\n        'bindTexture': {2: { 0:true }},\r\n        'activeTexture': {1: { 0:true }},\r\n        'getTexParameter': {2: { 0:true, 1:true }},\r\n        'texParameterf': {3: { 0:true, 1:true }},\r\n        'texParameteri': {3: { 0:true, 1:true, 2:true }},\r\n        // texImage2D and texSubImage2D are defined below with WebGL 2 entrypoints\r\n        'copyTexImage2D': {8: { 0:true, 2:true }},\r\n        'copyTexSubImage2D': {8: { 0:true }},\r\n        'generateMipmap': {1: { 0:true }},\r\n        // compressedTexImage2D and compressedTexSubImage2D are defined below with WebGL 2 entrypoints\r\n\r\n        // Buffer objects\r\n\r\n        'bindBuffer': {2: { 0:true }},\r\n        // bufferData and bufferSubData are defined below with WebGL 2 entrypoints\r\n        'getBufferParameter': {2: { 0:true, 1:true }},\r\n\r\n        // Renderbuffers and framebuffers\r\n\r\n        'pixelStorei': {2: { 0:true, 1:true }},\r\n        // readPixels is defined below with WebGL 2 entrypoints\r\n        'bindRenderbuffer': {2: { 0:true }},\r\n        'bindFramebuffer': {2: { 0:true }},\r\n        'checkFramebufferStatus': {1: { 0:true }},\r\n        'framebufferRenderbuffer': {4: { 0:true, 1:true, 2:true }},\r\n        'framebufferTexture2D': {5: { 0:true, 1:true, 2:true }},\r\n        'getFramebufferAttachmentParameter': {3: { 0:true, 1:true, 2:true }},\r\n        'getRenderbufferParameter': {2: { 0:true, 1:true }},\r\n        'renderbufferStorage': {4: { 0:true, 1:true }},\r\n\r\n        // Frame buffer operations (clear, blend, depth test, stencil)\r\n\r\n        'clear': {1: { 0: { 'enumBitwiseOr': ['COLOR_BUFFER_BIT', 'DEPTH_BUFFER_BIT', 'STENCIL_BUFFER_BIT'] }}},\r\n        'depthFunc': {1: { 0:true }},\r\n        'blendFunc': {2: { 0:true, 1:true }},\r\n        'blendFuncSeparate': {4: { 0:true, 1:true, 2:true, 3:true }},\r\n        'blendEquation': {1: { 0:true }},\r\n        'blendEquationSeparate': {2: { 0:true, 1:true }},\r\n        'stencilFunc': {3: { 0:true }},\r\n        'stencilFuncSeparate': {4: { 0:true, 1:true }},\r\n        'stencilMaskSeparate': {2: { 0:true }},\r\n        'stencilOp': {3: { 0:true, 1:true, 2:true }},\r\n        'stencilOpSeparate': {4: { 0:true, 1:true, 2:true, 3:true }},\r\n\r\n        // Culling\r\n\r\n        'cullFace': {1: { 0:true }},\r\n        'frontFace': {1: { 0:true }},\r\n\r\n        // ANGLE_instanced_arrays extension\r\n\r\n        'drawArraysInstancedANGLE': {4: { 0:true }},\r\n        'drawElementsInstancedANGLE': {5: { 0:true, 2:true }},\r\n\r\n        // EXT_blend_minmax extension\r\n\r\n        'blendEquationEXT': {1: { 0:true }},\r\n\r\n        // WebGL 2 Buffer objects\r\n\r\n        'bufferData': {\r\n            3: { 0:true, 2:true }, // WebGL 1\r\n            4: { 0:true, 2:true }, // WebGL 2\r\n            5: { 0:true, 2:true }  // WebGL 2\r\n        },\r\n        'bufferSubData': {\r\n            3: { 0:true }, // WebGL 1\r\n            4: { 0:true }, // WebGL 2\r\n            5: { 0:true }  // WebGL 2\r\n        },\r\n        'copyBufferSubData': {5: { 0:true, 1:true }},\r\n        'getBufferSubData': {3: { 0:true }, 4: { 0:true }, 5: { 0:true }},\r\n\r\n        // WebGL 2 Framebuffer objects\r\n\r\n        'blitFramebuffer': {10: { 8: { 'enumBitwiseOr': ['COLOR_BUFFER_BIT', 'DEPTH_BUFFER_BIT', 'STENCIL_BUFFER_BIT'] }, 9:true }},\r\n        'framebufferTextureLayer': {5: { 0:true, 1:true }},\r\n        'invalidateFramebuffer': {2: { 0:true }},\r\n        'invalidateSubFramebuffer': {6: { 0:true }},\r\n        'readBuffer': {1: { 0:true }},\r\n\r\n        // WebGL 2 Renderbuffer objects\r\n\r\n        'getInternalformatParameter': {3: { 0:true, 1:true, 2:true }},\r\n        'renderbufferStorageMultisample': {5: { 0:true, 2:true }},\r\n\r\n        // WebGL 2 Texture objects\r\n\r\n        'texStorage2D': {5: { 0:true, 2:true }},\r\n        'texStorage3D': {6: { 0:true, 2:true }},\r\n        'texImage2D': {\r\n            9: { 0:true, 2:true, 6:true, 7:true }, // WebGL 1 & 2\r\n            6: { 0:true, 2:true, 3:true, 4:true }, // WebGL 1\r\n            10: { 0:true, 2:true, 6:true, 7:true } // WebGL 2\r\n        },\r\n        'texImage3D': {\r\n            10: { 0:true, 2:true, 7:true, 8:true },\r\n            11: { 0:true, 2:true, 7:true, 8:true }\r\n        },\r\n        'texSubImage2D': {\r\n            9: { 0:true, 6:true, 7:true }, // WebGL 1 & 2\r\n            7: { 0:true, 4:true, 5:true }, // WebGL 1\r\n            10: { 0:true, 6:true, 7:true } // WebGL 2\r\n        },\r\n        'texSubImage3D': {\r\n            11: { 0:true, 8:true, 9:true },\r\n            12: { 0:true, 8:true, 9:true }\r\n        },\r\n        'copyTexSubImage3D': {9: { 0:true }},\r\n        'compressedTexImage2D': {\r\n            7: { 0: true, 2:true }, // WebGL 1 & 2\r\n            8: { 0: true, 2:true }, // WebGL 2\r\n            9: { 0: true, 2:true }  // WebGL 2\r\n        },\r\n        'compressedTexImage3D': {\r\n            8: { 0: true, 2:true },\r\n            9: { 0: true, 2:true },\r\n            10: { 0: true, 2:true }\r\n        },\r\n        'compressedTexSubImage2D': {\r\n            8: { 0: true, 6:true }, // WebGL 1 & 2\r\n            9: { 0: true, 6:true }, // WebGL 2\r\n            10: { 0: true, 6:true } // WebGL 2\r\n        },\r\n        'compressedTexSubImage3D': {\r\n            10: { 0: true, 8:true },\r\n            11: { 0: true, 8:true },\r\n            12: { 0: true, 8:true }\r\n        },\r\n\r\n        // WebGL 2 Vertex attribs\r\n\r\n        'vertexAttribIPointer': {5: { 2:true }},\r\n\r\n        // WebGL 2 Writing to the drawing buffer\r\n\r\n        'drawArraysInstanced': {4: { 0:true }},\r\n        'drawElementsInstanced': {5: { 0:true, 2:true }},\r\n        'drawRangeElements': {6: { 0:true, 4:true }},\r\n\r\n        // WebGL 2 Reading back pixels\r\n\r\n        'readPixels': {\r\n            7: { 4:true, 5:true }, // WebGL 1 & 2\r\n            8: { 4:true, 5:true }  // WebGL 2\r\n        },\r\n\r\n        // WebGL 2 Multiple Render Targets\r\n\r\n        'clearBufferfv': {3: { 0:true }, 4: { 0:true }},\r\n        'clearBufferiv': {3: { 0:true }, 4: { 0:true }},\r\n        'clearBufferuiv': {3: { 0:true }, 4: { 0:true }},\r\n        'clearBufferfi': {4: { 0:true }},\r\n\r\n        // WebGL 2 Query objects\r\n\r\n        'beginQuery': {2: { 0:true }},\r\n        'endQuery': {1: { 0:true }},\r\n        'getQuery': {2: { 0:true, 1:true }},\r\n        'getQueryParameter': {2: { 1:true }},\r\n\r\n        // WebGL 2 Sampler objects\r\n\r\n        'samplerParameteri': {3: { 1:true, 2:true }},\r\n        'samplerParameterf': {3: { 1:true }},\r\n        'getSamplerParameter': {2: { 1:true }},\r\n\r\n        // WebGL 2 Sync objects\r\n\r\n        'fenceSync': {2: { 0:true, 1: { 'enumBitwiseOr': [] } }},\r\n        'clientWaitSync': {3: { 1: { 'enumBitwiseOr': ['SYNC_FLUSH_COMMANDS_BIT'] } }},\r\n        'waitSync': {3: { 1: { 'enumBitwiseOr': [] } }},\r\n        'getSyncParameter': {2: { 1:true }},\r\n\r\n        // WebGL 2 Transform Feedback\r\n\r\n        'bindTransformFeedback': {2: { 0:true }},\r\n        'beginTransformFeedback': {1: { 0:true }},\r\n        'transformFeedbackVaryings': {3: { 2:true }},\r\n\r\n        // WebGL2 Uniform Buffer Objects and Transform Feedback Buffers\r\n\r\n        'bindBufferBase': {3: { 0:true }},\r\n        'bindBufferRange': {5: { 0:true }},\r\n        'getIndexedParameter': {2: { 0:true }},\r\n        'getActiveUniforms': {3: { 2:true }},\r\n        'getActiveUniformBlockParameter': {3: { 2:true }}\r\n    };\r\n\r\n    /**\r\n     * Map of numbers to names.\r\n     * @type {Object}\r\n     */\r\n    var glEnums = null;\r\n\r\n    /**\r\n     * Map of names to numbers.\r\n     * @type {Object}\r\n     */\r\n    var enumStringToValue = null;\r\n\r\n    /**\r\n     * Initializes this module. Safe to call more than once.\r\n     * @param {!WebGLRenderingContext} ctx A WebGL context. If\r\n     *    you have more than one context it doesn't matter which one\r\n     *    you pass in, it is only used to pull out constants.\r\n     */\r\n    function init(ctx) {\r\n        if (glEnums == null) {\r\n            glEnums = { };\r\n            enumStringToValue = { };\r\n            for (var propertyName in ctx) {\r\n                if (typeof ctx[propertyName] == 'number') {\r\n                    glEnums[ctx[propertyName]] = propertyName;\r\n                    enumStringToValue[propertyName] = ctx[propertyName];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Checks the utils have been initialized.\r\n     */\r\n    function checkInit() {\r\n        if (glEnums == null) {\r\n            throw 'WebGLDebugUtils.init(ctx) not called';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns true or false if value matches any WebGL enum\r\n     * @param {*} value Value to check if it might be an enum.\r\n     * @return {boolean} True if value matches one of the WebGL defined enums\r\n     */\r\n    function mightBeEnum(value) {\r\n        checkInit();\r\n        return (glEnums[value] !== undefined);\r\n    }\r\n\r\n    /**\r\n     * Gets an string version of an WebGL enum.\r\n     *\r\n     * Example:\r\n     *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());\r\n     *\r\n     * @param {number} value Value to return an enum for\r\n     * @return {string} The string version of the enum.\r\n     */\r\n    function glEnumToString(value) {\r\n        checkInit();\r\n        var name = glEnums[value];\r\n        return (name !== undefined) ? (\"gl.\" + name) :\r\n            (\"/*UNKNOWN WebGL ENUM*/ 0x\" + value.toString(16) + \"\");\r\n    }\r\n\r\n    /**\r\n     * Returns the string version of a WebGL argument.\r\n     * Attempts to convert enum arguments to strings.\r\n     * @param {string} functionName the name of the WebGL function.\r\n     * @param {number} numArgs the number of arguments passed to the function.\r\n     * @param {number} argumentIndx the index of the argument.\r\n     * @param {*} value The value of the argument.\r\n     * @return {string} The value as a string.\r\n     */\r\n    function glFunctionArgToString(functionName, numArgs, argumentIndex, value) {\r\n        var funcInfo = glValidEnumContexts[functionName];\r\n        if (funcInfo !== undefined) {\r\n            var funcInfo = funcInfo[numArgs];\r\n            if (funcInfo !== undefined) {\r\n                if (funcInfo[argumentIndex]) {\r\n                    if (typeof funcInfo[argumentIndex] === 'object' &&\r\n                        funcInfo[argumentIndex]['enumBitwiseOr'] !== undefined) {\r\n                        var enums = funcInfo[argumentIndex]['enumBitwiseOr'];\r\n                        var orResult = 0;\r\n                        var orEnums = [];\r\n                        for (var i = 0; i < enums.length; ++i) {\r\n                            var enumValue = enumStringToValue[enums[i]];\r\n                            if ((value & enumValue) !== 0) {\r\n                                orResult |= enumValue;\r\n                                orEnums.push(glEnumToString(enumValue));\r\n                            }\r\n                        }\r\n                        if (orResult === value) {\r\n                            return orEnums.join(' | ');\r\n                        } else {\r\n                            return glEnumToString(value);\r\n                        }\r\n                    } else {\r\n                        return glEnumToString(value);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (value === null) {\r\n            return \"null\";\r\n        } else if (value === undefined) {\r\n            return \"undefined\";\r\n        } else {\r\n            return value.toString();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Converts the arguments of a WebGL function to a string.\r\n     * Attempts to convert enum arguments to strings.\r\n     *\r\n     * @param {string} functionName the name of the WebGL function.\r\n     * @param {number} args The arguments.\r\n     * @return {string} The arguments as a string.\r\n     */\r\n    function glFunctionArgsToString(functionName, args) {\r\n        // apparently we can't do args.join(\",\");\r\n        var argStr = \"\";\r\n        var numArgs = args.length;\r\n        for (var ii = 0; ii < numArgs; ++ii) {\r\n            argStr += ((ii == 0) ? '' : ', ') +\r\n                glFunctionArgToString(functionName, numArgs, ii, args[ii]);\r\n        }\r\n        return argStr;\r\n    };\r\n\r\n\r\n    function makePropertyWrapper(wrapper, original, propertyName) {\r\n        //log(\"wrap prop: \" + propertyName);\r\n        wrapper.__defineGetter__(propertyName, function() {\r\n            return original[propertyName];\r\n        });\r\n        // TODO(gmane): this needs to handle properties that take more than\r\n        // one value?\r\n        wrapper.__defineSetter__(propertyName, function(value) {\r\n            //log(\"set: \" + propertyName);\r\n            original[propertyName] = value;\r\n        });\r\n    }\r\n\r\n// Makes a function that calls a function on another object.\r\n    function makeFunctionWrapper(original, functionName) {\r\n        //log(\"wrap fn: \" + functionName);\r\n        var f = original[functionName];\r\n        return function() {\r\n            //log(\"call: \" + functionName);\r\n            var result = f.apply(original, arguments);\r\n            return result;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Given a WebGL context returns a wrapped context that calls\r\n     * gl.getError after every command and calls a function if the\r\n     * result is not gl.NO_ERROR.\r\n     *\r\n     * @param {!WebGLRenderingContext} ctx The webgl context to\r\n     *        wrap.\r\n     * @param {!function(err, funcName, args): void} opt_onErrorFunc\r\n     *        The function to call when gl.getError returns an\r\n     *        error. If not specified the default function calls\r\n     *        console.log with a message.\r\n     * @param {!function(funcName, args): void} opt_onFunc The\r\n     *        function to call when each webgl function is called.\r\n     *        You can use this to log all calls for example.\r\n     * @param {!WebGLRenderingContext} opt_err_ctx The webgl context\r\n     *        to call getError on if different than ctx.\r\n     */\r\n    function makeDebugContext(ctx, opt_onErrorFunc, opt_onFunc, opt_err_ctx) {\r\n        opt_err_ctx = opt_err_ctx || ctx;\r\n        init(ctx);\r\n        opt_onErrorFunc = opt_onErrorFunc || function(err, functionName, args) {\r\n            // apparently we can't do args.join(\",\");\r\n            var argStr = \"\";\r\n            var numArgs = args.length;\r\n            for (var ii = 0; ii < numArgs; ++ii) {\r\n                argStr += ((ii == 0) ? '' : ', ') +\r\n                    glFunctionArgToString(functionName, numArgs, ii, args[ii]);\r\n            }\r\n            error(\"WebGL error \"+ glEnumToString(err) + \" in \"+ functionName +\r\n                \"(\" + argStr + \")\");\r\n        };\r\n\r\n        // Holds booleans for each GL error so after we get the error ourselves\r\n        // we can still return it to the client app.\r\n        var glErrorShadow = { };\r\n\r\n        // Makes a function that calls a WebGL function and then calls getError.\r\n        function makeErrorWrapper(ctx, functionName) {\r\n            return function() {\r\n                if (opt_onFunc) {\r\n                    opt_onFunc(functionName, arguments);\r\n                }\r\n                var result = ctx[functionName].apply(ctx, arguments);\r\n                var err = opt_err_ctx.getError();\r\n                if (err != 0) {\r\n                    glErrorShadow[err] = true;\r\n                    opt_onErrorFunc(err, functionName, arguments);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n\r\n        // Make a an object that has a copy of every property of the WebGL context\r\n        // but wraps all functions.\r\n        var wrapper = {};\r\n        for (var propertyName in ctx) {\r\n            if (typeof ctx[propertyName] == 'function') {\r\n                if (propertyName != 'getExtension') {\r\n                    wrapper[propertyName] = makeErrorWrapper(ctx, propertyName);\r\n                } else {\r\n                    var wrapped = makeErrorWrapper(ctx, propertyName);\r\n                    wrapper[propertyName] = function () {\r\n                        var result = wrapped.apply(ctx, arguments);\r\n                        if (!result) {\r\n                            return null;\r\n                        }\r\n                        return makeDebugContext(result, opt_onErrorFunc, opt_onFunc, opt_err_ctx);\r\n                    };\r\n                }\r\n            } else {\r\n                makePropertyWrapper(wrapper, ctx, propertyName);\r\n            }\r\n        }\r\n\r\n        // Override the getError function with one that returns our saved results.\r\n        wrapper.getError = function() {\r\n            for (var err in glErrorShadow) {\r\n                if (glErrorShadow.hasOwnProperty(err)) {\r\n                    if (glErrorShadow[err]) {\r\n                        glErrorShadow[err] = false;\r\n                        return err;\r\n                    }\r\n                }\r\n            }\r\n            return ctx.NO_ERROR;\r\n        };\r\n\r\n        return wrapper;\r\n    }\r\n\r\n    function resetToInitialState(ctx) {\r\n        var isWebGL2RenderingContext = !!ctx.createTransformFeedback;\r\n\r\n        if (isWebGL2RenderingContext) {\r\n            ctx.bindVertexArray(null);\r\n        }\r\n\r\n        var numAttribs = ctx.getParameter(ctx.MAX_VERTEX_ATTRIBS);\r\n        var tmp = ctx.createBuffer();\r\n        ctx.bindBuffer(ctx.ARRAY_BUFFER, tmp);\r\n        for (var ii = 0; ii < numAttribs; ++ii) {\r\n            ctx.disableVertexAttribArray(ii);\r\n            ctx.vertexAttribPointer(ii, 4, ctx.FLOAT, false, 0, 0);\r\n            ctx.vertexAttrib1f(ii, 0);\r\n            if (isWebGL2RenderingContext) {\r\n                ctx.vertexAttribDivisor(ii, 0);\r\n            }\r\n        }\r\n        ctx.deleteBuffer(tmp);\r\n\r\n        var numTextureUnits = ctx.getParameter(ctx.MAX_TEXTURE_IMAGE_UNITS);\r\n        for (var ii = 0; ii < numTextureUnits; ++ii) {\r\n            ctx.activeTexture(ctx.TEXTURE0 + ii);\r\n            ctx.bindTexture(ctx.TEXTURE_CUBE_MAP, null);\r\n            ctx.bindTexture(ctx.TEXTURE_2D, null);\r\n            if (isWebGL2RenderingContext) {\r\n                ctx.bindTexture(ctx.TEXTURE_2D_ARRAY, null);\r\n                ctx.bindTexture(ctx.TEXTURE_3D, null);\r\n                ctx.bindSampler(ii, null);\r\n            }\r\n        }\r\n\r\n        ctx.activeTexture(ctx.TEXTURE0);\r\n        ctx.useProgram(null);\r\n        ctx.bindBuffer(ctx.ARRAY_BUFFER, null);\r\n        ctx.bindBuffer(ctx.ELEMENT_ARRAY_BUFFER, null);\r\n        ctx.bindFramebuffer(ctx.FRAMEBUFFER, null);\r\n        ctx.bindRenderbuffer(ctx.RENDERBUFFER, null);\r\n        ctx.disable(ctx.BLEND);\r\n        ctx.disable(ctx.CULL_FACE);\r\n        ctx.disable(ctx.DEPTH_TEST);\r\n        ctx.disable(ctx.DITHER);\r\n        ctx.disable(ctx.SCISSOR_TEST);\r\n        ctx.blendColor(0, 0, 0, 0);\r\n        ctx.blendEquation(ctx.FUNC_ADD);\r\n        ctx.blendFunc(ctx.ONE, ctx.ZERO);\r\n        ctx.clearColor(0, 0, 0, 0);\r\n        ctx.clearDepth(1);\r\n        ctx.clearStencil(-1);\r\n        ctx.colorMask(true, true, true, true);\r\n        ctx.cullFace(ctx.BACK);\r\n        ctx.depthFunc(ctx.LESS);\r\n        ctx.depthMask(true);\r\n        ctx.depthRange(0, 1);\r\n        ctx.frontFace(ctx.CCW);\r\n        ctx.hint(ctx.GENERATE_MIPMAP_HINT, ctx.DONT_CARE);\r\n        ctx.lineWidth(1);\r\n        ctx.pixelStorei(ctx.PACK_ALIGNMENT, 4);\r\n        ctx.pixelStorei(ctx.UNPACK_ALIGNMENT, 4);\r\n        ctx.pixelStorei(ctx.UNPACK_FLIP_Y_WEBGL, false);\r\n        ctx.pixelStorei(ctx.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\r\n        // TODO: Delete this IF.\r\n        if (ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL) {\r\n            ctx.pixelStorei(ctx.UNPACK_COLORSPACE_CONVERSION_WEBGL, ctx.BROWSER_DEFAULT_WEBGL);\r\n        }\r\n        ctx.polygonOffset(0, 0);\r\n        ctx.sampleCoverage(1, false);\r\n        ctx.scissor(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        ctx.stencilFunc(ctx.ALWAYS, 0, 0xFFFFFFFF);\r\n        ctx.stencilMask(0xFFFFFFFF);\r\n        ctx.stencilOp(ctx.KEEP, ctx.KEEP, ctx.KEEP);\r\n        ctx.viewport(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        ctx.clear(ctx.COLOR_BUFFER_BIT | ctx.DEPTH_BUFFER_BIT | ctx.STENCIL_BUFFER_BIT);\r\n\r\n        if (isWebGL2RenderingContext) {\r\n            ctx.drawBuffers([ctx.BACK]);\r\n            ctx.readBuffer(ctx.BACK);\r\n            ctx.bindBuffer(ctx.COPY_READ_BUFFER, null);\r\n            ctx.bindBuffer(ctx.COPY_WRITE_BUFFER, null);\r\n            ctx.bindBuffer(ctx.PIXEL_PACK_BUFFER, null);\r\n            ctx.bindBuffer(ctx.PIXEL_UNPACK_BUFFER, null);\r\n            var numTransformFeedbacks = ctx.getParameter(ctx.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);\r\n            for (var ii = 0; ii < numTransformFeedbacks; ++ii) {\r\n                ctx.bindBufferBase(ctx.TRANSFORM_FEEDBACK_BUFFER, ii, null);\r\n            }\r\n            var numUBOs = ctx.getParameter(ctx.MAX_UNIFORM_BUFFER_BINDINGS);\r\n            for (var ii = 0; ii < numUBOs; ++ii) {\r\n                ctx.bindBufferBase(ctx.UNIFORM_BUFFER, ii, null);\r\n            }\r\n            ctx.disable(ctx.RASTERIZER_DISCARD);\r\n            ctx.pixelStorei(ctx.UNPACK_IMAGE_HEIGHT, 0);\r\n            ctx.pixelStorei(ctx.UNPACK_SKIP_IMAGES, 0);\r\n            ctx.pixelStorei(ctx.UNPACK_ROW_LENGTH, 0);\r\n            ctx.pixelStorei(ctx.UNPACK_SKIP_ROWS, 0);\r\n            ctx.pixelStorei(ctx.UNPACK_SKIP_PIXELS, 0);\r\n            ctx.pixelStorei(ctx.PACK_ROW_LENGTH, 0);\r\n            ctx.pixelStorei(ctx.PACK_SKIP_ROWS, 0);\r\n            ctx.pixelStorei(ctx.PACK_SKIP_PIXELS, 0);\r\n            ctx.hint(ctx.FRAGMENT_SHADER_DERIVATIVE_HINT, ctx.DONT_CARE);\r\n        }\r\n\r\n        // TODO: This should NOT be needed but Firefox fails with 'hint'\r\n        while(ctx.getError());\r\n    }\r\n\r\n    function makeLostContextSimulatingCanvas(canvas) {\r\n        var unwrappedContext_;\r\n        var wrappedContext_;\r\n        var onLost_ = [];\r\n        var onRestored_ = [];\r\n        var wrappedContext_ = {};\r\n        var contextId_ = 1;\r\n        var contextLost_ = false;\r\n        var resourceId_ = 0;\r\n        var resourceDb_ = [];\r\n        var numCallsToLoseContext_ = 0;\r\n        var numCalls_ = 0;\r\n        var canRestore_ = false;\r\n        var restoreTimeout_ = 0;\r\n        var isWebGL2RenderingContext;\r\n\r\n        // Holds booleans for each GL error so can simulate errors.\r\n        var glErrorShadow_ = { };\r\n\r\n        canvas.getContext = function(f) {\r\n            return function() {\r\n                var ctx = f.apply(canvas, arguments);\r\n                // Did we get a context and is it a WebGL context?\r\n                if ((ctx instanceof WebGLRenderingContext) || (window.WebGL2RenderingContext && (ctx instanceof WebGL2RenderingContext))) {\r\n                    if (ctx != unwrappedContext_) {\r\n                        if (unwrappedContext_) {\r\n                            throw \"got different context\"\r\n                        }\r\n                        isWebGL2RenderingContext = window.WebGL2RenderingContext && (ctx instanceof WebGL2RenderingContext);\r\n                        unwrappedContext_ = ctx;\r\n                        wrappedContext_ = makeLostContextSimulatingContext(unwrappedContext_);\r\n                    }\r\n                    return wrappedContext_;\r\n                }\r\n                return ctx;\r\n            }\r\n        }(canvas.getContext);\r\n\r\n        function wrapEvent(listener) {\r\n            if (typeof(listener) == \"function\") {\r\n                return listener;\r\n            } else {\r\n                return function(info) {\r\n                    listener.handleEvent(info);\r\n                }\r\n            }\r\n        }\r\n\r\n        var addOnContextLostListener = function(listener) {\r\n            onLost_.push(wrapEvent(listener));\r\n        };\r\n\r\n        var addOnContextRestoredListener = function(listener) {\r\n            onRestored_.push(wrapEvent(listener));\r\n        };\r\n\r\n\r\n        function wrapAddEventListener(canvas) {\r\n            var f = canvas.addEventListener;\r\n            canvas.addEventListener = function(type, listener, bubble) {\r\n                switch (type) {\r\n                    case 'webglcontextlost':\r\n                        addOnContextLostListener(listener);\r\n                        break;\r\n                    case 'webglcontextrestored':\r\n                        addOnContextRestoredListener(listener);\r\n                        break;\r\n                    default:\r\n                        f.apply(canvas, arguments);\r\n                }\r\n            };\r\n        }\r\n\r\n        wrapAddEventListener(canvas);\r\n\r\n        canvas.loseContext = function() {\r\n            if (!contextLost_) {\r\n                contextLost_ = true;\r\n                numCallsToLoseContext_ = 0;\r\n                ++contextId_;\r\n                while (unwrappedContext_.getError());\r\n                clearErrors();\r\n                glErrorShadow_[unwrappedContext_.CONTEXT_LOST_WEBGL] = true;\r\n                var event = makeWebGLContextEvent(\"context lost\");\r\n                var callbacks = onLost_.slice();\r\n                setTimeout(function() {\r\n                    //log(\"numCallbacks:\" + callbacks.length);\r\n                    for (var ii = 0; ii < callbacks.length; ++ii) {\r\n                        //log(\"calling callback:\" + ii);\r\n                        callbacks[ii](event);\r\n                    }\r\n                    if (restoreTimeout_ >= 0) {\r\n                        setTimeout(function() {\r\n                            canvas.restoreContext();\r\n                        }, restoreTimeout_);\r\n                    }\r\n                }, 0);\r\n            }\r\n        };\r\n\r\n        canvas.restoreContext = function() {\r\n            if (contextLost_) {\r\n                if (onRestored_.length) {\r\n                    setTimeout(function() {\r\n                        if (!canRestore_) {\r\n                            throw \"can not restore. webglcontestlost listener did not call event.preventDefault\";\r\n                        }\r\n                        freeResources();\r\n                        resetToInitialState(unwrappedContext_);\r\n                        contextLost_ = false;\r\n                        numCalls_ = 0;\r\n                        canRestore_ = false;\r\n                        var callbacks = onRestored_.slice();\r\n                        var event = makeWebGLContextEvent(\"context restored\");\r\n                        for (var ii = 0; ii < callbacks.length; ++ii) {\r\n                            callbacks[ii](event);\r\n                        }\r\n                    }, 0);\r\n                }\r\n            }\r\n        };\r\n\r\n        canvas.loseContextInNCalls = function(numCalls) {\r\n            if (contextLost_) {\r\n                throw \"You can not ask a lost contet to be lost\";\r\n            }\r\n            numCallsToLoseContext_ = numCalls_ + numCalls;\r\n        };\r\n\r\n        canvas.getNumCalls = function() {\r\n            return numCalls_;\r\n        };\r\n\r\n        canvas.setRestoreTimeout = function(timeout) {\r\n            restoreTimeout_ = timeout;\r\n        };\r\n\r\n        function isWebGLObject(obj) {\r\n            //return false;\r\n            return (obj instanceof WebGLBuffer ||\r\n                obj instanceof WebGLFramebuffer ||\r\n                obj instanceof WebGLProgram ||\r\n                obj instanceof WebGLRenderbuffer ||\r\n                obj instanceof WebGLShader ||\r\n                obj instanceof WebGLTexture);\r\n        }\r\n\r\n        function checkResources(args) {\r\n            for (var ii = 0; ii < args.length; ++ii) {\r\n                var arg = args[ii];\r\n                if (isWebGLObject(arg)) {\r\n                    return arg.__webglDebugContextLostId__ == contextId_;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        function clearErrors() {\r\n            var k = Object.keys(glErrorShadow_);\r\n            for (var ii = 0; ii < k.length; ++ii) {\r\n                delete glErrorShadow_[k[ii]];\r\n            }\r\n        }\r\n\r\n        function loseContextIfTime() {\r\n            ++numCalls_;\r\n            if (!contextLost_) {\r\n                if (numCallsToLoseContext_ == numCalls_) {\r\n                    canvas.loseContext();\r\n                }\r\n            }\r\n        }\r\n\r\n        // Makes a function that simulates WebGL when out of context.\r\n        function makeLostContextFunctionWrapper(ctx, functionName) {\r\n            var f = ctx[functionName];\r\n            return function() {\r\n                // log(\"calling:\" + functionName);\r\n                // Only call the functions if the context is not lost.\r\n                loseContextIfTime();\r\n                if (!contextLost_) {\r\n                    //if (!checkResources(arguments)) {\r\n                    //  glErrorShadow_[wrappedContext_.INVALID_OPERATION] = true;\r\n                    //  return;\r\n                    //}\r\n                    var result = f.apply(ctx, arguments);\r\n                    return result;\r\n                }\r\n            };\r\n        }\r\n\r\n        function freeResources() {\r\n            for (var ii = 0; ii < resourceDb_.length; ++ii) {\r\n                var resource = resourceDb_[ii];\r\n                if (resource instanceof WebGLBuffer) {\r\n                    unwrappedContext_.deleteBuffer(resource);\r\n                } else if (resource instanceof WebGLFramebuffer) {\r\n                    unwrappedContext_.deleteFramebuffer(resource);\r\n                } else if (resource instanceof WebGLProgram) {\r\n                    unwrappedContext_.deleteProgram(resource);\r\n                } else if (resource instanceof WebGLRenderbuffer) {\r\n                    unwrappedContext_.deleteRenderbuffer(resource);\r\n                } else if (resource instanceof WebGLShader) {\r\n                    unwrappedContext_.deleteShader(resource);\r\n                } else if (resource instanceof WebGLTexture) {\r\n                    unwrappedContext_.deleteTexture(resource);\r\n                }\r\n                else if (isWebGL2RenderingContext) {\r\n                    if (resource instanceof WebGLQuery) {\r\n                        unwrappedContext_.deleteQuery(resource);\r\n                    } else if (resource instanceof WebGLSampler) {\r\n                        unwrappedContext_.deleteSampler(resource);\r\n                    } else if (resource instanceof WebGLSync) {\r\n                        unwrappedContext_.deleteSync(resource);\r\n                    } else if (resource instanceof WebGLTransformFeedback) {\r\n                        unwrappedContext_.deleteTransformFeedback(resource);\r\n                    } else if (resource instanceof WebGLVertexArrayObject) {\r\n                        unwrappedContext_.deleteVertexArray(resource);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function makeWebGLContextEvent(statusMessage) {\r\n            return {\r\n                statusMessage: statusMessage,\r\n                preventDefault: function() {\r\n                    canRestore_ = true;\r\n                }\r\n            };\r\n        }\r\n\r\n        return canvas;\r\n\r\n        function makeLostContextSimulatingContext(ctx) {\r\n            // copy all functions and properties to wrapper\r\n            for (var propertyName in ctx) {\r\n                if (typeof ctx[propertyName] == 'function') {\r\n                    wrappedContext_[propertyName] = makeLostContextFunctionWrapper(\r\n                        ctx, propertyName);\r\n                } else {\r\n                    makePropertyWrapper(wrappedContext_, ctx, propertyName);\r\n                }\r\n            }\r\n\r\n            // Wrap a few functions specially.\r\n            wrappedContext_.getError = function() {\r\n                loseContextIfTime();\r\n                if (!contextLost_) {\r\n                    var err;\r\n                    while (err = unwrappedContext_.getError()) {\r\n                        glErrorShadow_[err] = true;\r\n                    }\r\n                }\r\n                for (var err in glErrorShadow_) {\r\n                    if (glErrorShadow_[err]) {\r\n                        delete glErrorShadow_[err];\r\n                        return err;\r\n                    }\r\n                }\r\n                return wrappedContext_.NO_ERROR;\r\n            };\r\n\r\n            var creationFunctions = [\r\n                \"createBuffer\",\r\n                \"createFramebuffer\",\r\n                \"createProgram\",\r\n                \"createRenderbuffer\",\r\n                \"createShader\",\r\n                \"createTexture\"\r\n            ];\r\n            if (isWebGL2RenderingContext) {\r\n                creationFunctions.push(\r\n                    \"createQuery\",\r\n                    \"createSampler\",\r\n                    \"fenceSync\",\r\n                    \"createTransformFeedback\",\r\n                    \"createVertexArray\"\r\n                );\r\n            }\r\n            for (var ii = 0; ii < creationFunctions.length; ++ii) {\r\n                var functionName = creationFunctions[ii];\r\n                wrappedContext_[functionName] = function(f) {\r\n                    return function() {\r\n                        loseContextIfTime();\r\n                        if (contextLost_) {\r\n                            return null;\r\n                        }\r\n                        var obj = f.apply(ctx, arguments);\r\n                        obj.__webglDebugContextLostId__ = contextId_;\r\n                        resourceDb_.push(obj);\r\n                        return obj;\r\n                    };\r\n                }(ctx[functionName]);\r\n            }\r\n\r\n            var functionsThatShouldReturnNull = [\r\n                \"getActiveAttrib\",\r\n                \"getActiveUniform\",\r\n                \"getBufferParameter\",\r\n                \"getContextAttributes\",\r\n                \"getAttachedShaders\",\r\n                \"getFramebufferAttachmentParameter\",\r\n                \"getParameter\",\r\n                \"getProgramParameter\",\r\n                \"getProgramInfoLog\",\r\n                \"getRenderbufferParameter\",\r\n                \"getShaderParameter\",\r\n                \"getShaderInfoLog\",\r\n                \"getShaderSource\",\r\n                \"getTexParameter\",\r\n                \"getUniform\",\r\n                \"getUniformLocation\",\r\n                \"getVertexAttrib\"\r\n            ];\r\n            if (isWebGL2RenderingContext) {\r\n                functionsThatShouldReturnNull.push(\r\n                    \"getInternalformatParameter\",\r\n                    \"getQuery\",\r\n                    \"getQueryParameter\",\r\n                    \"getSamplerParameter\",\r\n                    \"getSyncParameter\",\r\n                    \"getTransformFeedbackVarying\",\r\n                    \"getIndexedParameter\",\r\n                    \"getUniformIndices\",\r\n                    \"getActiveUniforms\",\r\n                    \"getActiveUniformBlockParameter\",\r\n                    \"getActiveUniformBlockName\"\r\n                );\r\n            }\r\n            for (var ii = 0; ii < functionsThatShouldReturnNull.length; ++ii) {\r\n                var functionName = functionsThatShouldReturnNull[ii];\r\n                wrappedContext_[functionName] = function(f) {\r\n                    return function() {\r\n                        loseContextIfTime();\r\n                        if (contextLost_) {\r\n                            return null;\r\n                        }\r\n                        return f.apply(ctx, arguments);\r\n                    }\r\n                }(wrappedContext_[functionName]);\r\n            }\r\n\r\n            var isFunctions = [\r\n                \"isBuffer\",\r\n                \"isEnabled\",\r\n                \"isFramebuffer\",\r\n                \"isProgram\",\r\n                \"isRenderbuffer\",\r\n                \"isShader\",\r\n                \"isTexture\"\r\n            ];\r\n            if (isWebGL2RenderingContext) {\r\n                isFunctions.push(\r\n                    \"isQuery\",\r\n                    \"isSampler\",\r\n                    \"isSync\",\r\n                    \"isTransformFeedback\",\r\n                    \"isVertexArray\"\r\n                );\r\n            }\r\n            for (var ii = 0; ii < isFunctions.length; ++ii) {\r\n                var functionName = isFunctions[ii];\r\n                wrappedContext_[functionName] = function(f) {\r\n                    return function() {\r\n                        loseContextIfTime();\r\n                        if (contextLost_) {\r\n                            return false;\r\n                        }\r\n                        return f.apply(ctx, arguments);\r\n                    }\r\n                }(wrappedContext_[functionName]);\r\n            }\r\n\r\n            wrappedContext_.checkFramebufferStatus = function(f) {\r\n                return function() {\r\n                    loseContextIfTime();\r\n                    if (contextLost_) {\r\n                        return wrappedContext_.FRAMEBUFFER_UNSUPPORTED;\r\n                    }\r\n                    return f.apply(ctx, arguments);\r\n                };\r\n            }(wrappedContext_.checkFramebufferStatus);\r\n\r\n            wrappedContext_.getAttribLocation = function(f) {\r\n                return function() {\r\n                    loseContextIfTime();\r\n                    if (contextLost_) {\r\n                        return -1;\r\n                    }\r\n                    return f.apply(ctx, arguments);\r\n                };\r\n            }(wrappedContext_.getAttribLocation);\r\n\r\n            wrappedContext_.getVertexAttribOffset = function(f) {\r\n                return function() {\r\n                    loseContextIfTime();\r\n                    if (contextLost_) {\r\n                        return 0;\r\n                    }\r\n                    return f.apply(ctx, arguments);\r\n                };\r\n            }(wrappedContext_.getVertexAttribOffset);\r\n\r\n            wrappedContext_.isContextLost = function() {\r\n                return contextLost_;\r\n            };\r\n\r\n            if (isWebGL2RenderingContext) {\r\n                wrappedContext_.getFragDataLocation = function(f) {\r\n                    return function() {\r\n                        loseContextIfTime();\r\n                        if (contextLost_) {\r\n                            return -1;\r\n                        }\r\n                        return f.apply(ctx, arguments);\r\n                    };\r\n                }(wrappedContext_.getFragDataLocation);\r\n\r\n                wrappedContext_.clientWaitSync = function(f) {\r\n                    return function() {\r\n                        loseContextIfTime();\r\n                        if (contextLost_) {\r\n                            return wrappedContext_.WAIT_FAILED;\r\n                        }\r\n                        return f.apply(ctx, arguments);\r\n                    };\r\n                }(wrappedContext_.clientWaitSync);\r\n\r\n                wrappedContext_.getUniformBlockIndex = function(f) {\r\n                    return function() {\r\n                        loseContextIfTime();\r\n                        if (contextLost_) {\r\n                            return wrappedContext_.INVALID_INDEX;\r\n                        }\r\n                        return f.apply(ctx, arguments);\r\n                    };\r\n                }(wrappedContext_.getUniformBlockIndex);\r\n            }\r\n\r\n            return wrappedContext_;\r\n        }\r\n    }\r\n\r\n    return {\r\n        /**\r\n         * Initializes this module. Safe to call more than once.\r\n         * @param {!WebGLRenderingContext} ctx A WebGL context. If\r\n         *    you have more than one context it doesn't matter which one\r\n         *    you pass in, it is only used to pull out constants.\r\n         */\r\n        'init': init,\r\n\r\n        /**\r\n         * Returns true or false if value matches any WebGL enum\r\n         * @param {*} value Value to check if it might be an enum.\r\n         * @return {boolean} True if value matches one of the WebGL defined enums\r\n         */\r\n        'mightBeEnum': mightBeEnum,\r\n\r\n        /**\r\n         * Gets an string version of an WebGL enum.\r\n         *\r\n         * Example:\r\n         *   WebGLDebugUtil.init(ctx);\r\n         *   var str = WebGLDebugUtil.glEnumToString(ctx.getError());\r\n         *\r\n         * @param {number} value Value to return an enum for\r\n         * @return {string} The string version of the enum.\r\n         */\r\n        'glEnumToString': glEnumToString,\r\n\r\n        /**\r\n         * Converts the argument of a WebGL function to a string.\r\n         * Attempts to convert enum arguments to strings.\r\n         *\r\n         * Example:\r\n         *   WebGLDebugUtil.init(ctx);\r\n         *   var str = WebGLDebugUtil.glFunctionArgToString('bindTexture', 2, 0, gl.TEXTURE_2D);\r\n         *\r\n         * would return 'TEXTURE_2D'\r\n         *\r\n         * @param {string} functionName the name of the WebGL function.\r\n         * @param {number} numArgs The number of arguments\r\n         * @param {number} argumentIndx the index of the argument.\r\n         * @param {*} value The value of the argument.\r\n         * @return {string} The value as a string.\r\n         */\r\n        'glFunctionArgToString': glFunctionArgToString,\r\n\r\n        /**\r\n         * Converts the arguments of a WebGL function to a string.\r\n         * Attempts to convert enum arguments to strings.\r\n         *\r\n         * @param {string} functionName the name of the WebGL function.\r\n         * @param {number} args The arguments.\r\n         * @return {string} The arguments as a string.\r\n         */\r\n        'glFunctionArgsToString': glFunctionArgsToString,\r\n\r\n        /**\r\n         * Given a WebGL context returns a wrapped context that calls\r\n         * gl.getError after every command and calls a function if the\r\n         * result is not NO_ERROR.\r\n         *\r\n         * You can supply your own function if you want. For example, if you'd like\r\n         * an exception thrown on any GL error you could do this\r\n         *\r\n         *    function throwOnGLError(err, funcName, args) {\r\n         *      throw WebGLDebugUtils.glEnumToString(err) +\r\n         *            \" was caused by call to \" + funcName;\r\n         *    };\r\n         *\r\n         *    ctx = WebGLDebugUtils.makeDebugContext(\r\n         *        canvas.getContext(\"webgl\"), throwOnGLError);\r\n         *\r\n         * @param {!WebGLRenderingContext} ctx The webgl context to wrap.\r\n         * @param {!function(err, funcName, args): void} opt_onErrorFunc The function\r\n         *     to call when gl.getError returns an error. If not specified the default\r\n         *     function calls console.log with a message.\r\n         * @param {!function(funcName, args): void} opt_onFunc The\r\n         *     function to call when each webgl function is called. You\r\n         *     can use this to log all calls for example.\r\n         */\r\n        'makeDebugContext': makeDebugContext,\r\n\r\n        /**\r\n         * Given a canvas element returns a wrapped canvas element that will\r\n         * simulate lost context. The canvas returned adds the following functions.\r\n         *\r\n         * loseContext:\r\n         *   simulates a lost context event.\r\n         *\r\n         * restoreContext:\r\n         *   simulates the context being restored.\r\n         *\r\n         * lostContextInNCalls:\r\n         *   loses the context after N gl calls.\r\n         *\r\n         * getNumCalls:\r\n         *   tells you how many gl calls there have been so far.\r\n         *\r\n         * setRestoreTimeout:\r\n         *   sets the number of milliseconds until the context is restored\r\n         *   after it has been lost. Defaults to 0. Pass -1 to prevent\r\n         *   automatic restoring.\r\n         *\r\n         * @param {!Canvas} canvas The canvas element to wrap.\r\n         */\r\n        'makeLostContextSimulatingCanvas': makeLostContextSimulatingCanvas,\r\n\r\n        /**\r\n         * Resets a context to the initial state.\r\n         * @param {!WebGLRenderingContext} ctx The webgl context to\r\n         *     reset.\r\n         */\r\n        'resetToInitialState': resetToInitialState\r\n    };\r\n\r\n};\r\n\r\n"]}